:root{
  --primary:#ff2d8d;
  --on-primary:#fff;
  --bg:#111;
  --surface:#181818;
  --text:#f2f2f2;
  --muted:#9aa0a6;
  --chip:#1f1f1f;
  --chip-border:#2a2a2a;
  --border:#2a2a2a;
}

html,body{margin:0;background:var(--bg);color:var(--text);font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;}

button,input,textarea,select{font:inherit;color:inherit;background:transparent;border:1px solid var(--border);border-radius:12px;padding:10px;}
button{cursor:pointer}
button.primary{background:var(--primary);color:var(--on-primary);border-color:var(--primary);box-shadow:0 10px 28px color-mix(in oklab, var(--primary) 28%, transparent);}
button.primary:hover{transform:translateY(-1px)}
button.primary:active{transform:translateY(0)}

.muted{color:var(--muted)}
.section{margin:12px 0}
.section-title{font-weight:600;margin-bottom:6px}
.section-actions{margin-top:10px}

.caret{display:inline-block;transform:rotate(-90deg);transition:transform .2s}
details[open] .caret{transform:rotate(0deg)}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:16px}
.modal.show{display:flex}
.modal-card{background:var(--surface);border:1px solid var(--border);border-radius:16px;max-width:820px;width:100%;max-height:90vh;display:flex;flex-direction:column;overflow:hidden}
.modal-header,.modal-footer{padding:12px 14px;border-bottom:1px solid var(--border)}
.modal-footer{border-bottom:0;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:8px}
.modal-body{padding:12px 14px;overflow:auto}
.dlg-field{display:flex;flex-direction:column;gap:6px;margin:8px 0}
.dlg-field input{width:100%}

/* Cover */
.cover-row{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
#rmCoverPreview{max-width:80px;max-height:80px;display:none;border-radius:8px;border:1px solid var(--chip-border)}

/* Tag chips and AC */
.tagrow{display:flex;flex-wrap:wrap;gap:8px}
.tagchip{display:inline-flex;align-items:center;padding:6px 10px;border:1px solid var(--chip-border);border-radius:999px;background:var(--chip);gap:8px}
.tagchip.selected{outline:2px solid var(--primary)}
.tagadder{display:flex;gap:8px;align-items:center;margin-top:8px}
.ac-list{position:absolute;z-index:20;background:var(--surface);border:1px solid var(--border);border-radius:10px;margin-top:4px;min-width:220px;max-width:calc(100vw - 40px);max-height:240px;overflow:auto;box-shadow:0 10px 18px rgba(0,0,0,.35)}
.ac-item{padding:8px 10px;border-bottom:1px solid var(--border);cursor:pointer}
.ac-item:last-child{border-bottom:0}
.ac-item.active{background:color-mix(in oklab, var(--primary) 24%, transparent)}
.ac-title{font-weight:600}
.ac-meta{font-size:.85em;color:var(--muted)}

/* Ingredient editor */
#rmIngredients{display:flex;flex-direction:column;gap:10px}
.ing-row{display:grid;grid-template-columns: 2fr 100px 1.4fr;grid-auto-rows:auto;gap:8px;padding:8px;border:1px solid var(--chip-border);border-radius:12px;background:transparent}
.ing-name-wrap{position:relative}

/* Row mapping */
.ing-name{grid-column:1;grid-row:1;min-width:0}
.ing-qty{grid-column:2;grid-row:1}
.ing-size{grid-column:3;grid-row:1}
.ing-notes{grid-column:2 / 4;grid-row:2;min-width:0}
.ing-del{grid-column:1;grid-row:2;justify-self:end}

/* Inputs in ingredient row */
.ing-row textarea,.ing-row input{width:100%;max-width:100%;padding:8px;border:1px solid var(--chip-border);border-radius:12px;box-sizing:border-box}
.ing-name,.ing-notes{resize:none;height:3.6em;line-height:1.4}
.ing-del{background:var(--surface);border:1px solid var(--chip-border);border-radius:12px;padding:8px 12px;height:100%}

/* Steps editor basic */
#rmStepsList{display:flex;flex-direction:column;gap:10px}
.step-row .step-title{font-weight:600}
.stepAutoList{position:absolute;z-index:20;background:var(--surface);border:1px solid var(--border);border-radius:10px;max-height:200px;overflow:auto;display:none}
.stepAutoItem{padding:6px 8px;border-bottom:1px solid var(--border)}
.stepAutoItem:last-child{border-bottom:0}
